{"version":3,"file":"effect-slicer.js.map","sources":["../src/effect-slicer.esm.js"],"sourcesContent":["export default function EffectSlicer({ swiper, extendParams, on, emit }) {\n  extendParams({\n    slicerEffect: {\n      split: 5,\n    },\n  });\n\n  function effectVirtualTransitionEnd({ duration }) {\n    const { slides, activeIndex, $wrapperEl } = swiper;\n    if (duration !== 0) {\n      let eventTriggered = false;\n      const $transitionEndTarget = slides\n        .eq(activeIndex)\n        .find('.swiper-slicer-image-clone:nth-child(1)');\n\n      $transitionEndTarget.transitionEnd(() => {\n        if (eventTriggered) return;\n        if (!swiper || swiper.destroyed) return;\n        eventTriggered = true;\n        swiper.animating = false;\n        const triggerEvents = ['webkitTransitionEnd', 'transitionend'];\n        for (let i = 0; i < triggerEvents.length; i += 1) {\n          $wrapperEl.trigger(triggerEvents[i]);\n        }\n      });\n    }\n  }\n\n  const createImages = () => {\n    swiper.slides.each((slideEl) => {\n      const imageEl = slideEl.querySelector('.swiper-slicer-image');\n      if (!imageEl) return;\n      const nextEl = imageEl.nextElementSibling;\n      const cloneContainerEl = document.createElement('div');\n      cloneContainerEl.classList.add('swiper-slicer-image-clones');\n      for (let i = 0; i < swiper.params.slicerEffect.split; i += 1) {\n        const div = document.createElement('div');\n        div.classList.add('swiper-slicer-image-clone');\n        div.appendChild(imageEl.cloneNode());\n        cloneContainerEl.appendChild(div);\n      }\n      if (nextEl) {\n        imageEl.parentNode.insertBefore(cloneContainerEl, nextEl);\n      } else {\n        imageEl.parentNode.appendChild(cloneContainerEl);\n      }\n    });\n  };\n\n  const setImages = () => {\n    swiper.el.querySelectorAll('.swiper-slicer-image').forEach((imageEl) => {\n      imageEl.style.width = `${swiper.width}px`;\n      imageEl.style.height = `${swiper.height}px`;\n    });\n    swiper.el.querySelectorAll('.swiper-slide').forEach((slideEl) => {\n      slideEl\n        .querySelectorAll('.swiper-slicer-image-clone')\n        .forEach((cloneEl, cloneElIndex) => {\n          const cloneImg = cloneEl.querySelector('.swiper-slicer-image');\n          if (swiper.params.direction === 'horizontal') {\n            cloneEl.style.height = `${100 / swiper.params.slicerEffect.split}%`;\n            cloneEl.style.top = `${\n              (100 / swiper.params.slicerEffect.split) * cloneElIndex\n            }%`;\n            cloneImg.style.top = `-${100 * cloneElIndex}%`;\n          } else {\n            cloneEl.style.width = `${100 / swiper.params.slicerEffect.split}%`;\n            cloneEl.style.left = `${\n              (100 / swiper.params.slicerEffect.split) * cloneElIndex\n            }%`;\n            cloneImg.style.left = `-${100 * cloneElIndex}%`;\n          }\n        });\n    });\n  };\n\n  const setTranslate = () => {\n    const axis = swiper.params.direction === 'vertical' ? 'Y' : 'X';\n    swiper.slides.forEach((slideEl, slideIndex) => {\n      slideEl.style.transform = `translate${axis}(-${slideIndex * 100}%)`;\n      const slideProgress = slideEl.progress;\n      const contentEl = slideEl.querySelector('.swiper-slide-content');\n      if (contentEl) {\n        contentEl.style.transform = `translate${axis}(${\n          swiper.size * -slideProgress * 1.2\n        }px)`;\n      }\n      const images = slideEl.querySelectorAll('.swiper-slicer-image-clone');\n      images.forEach((imageEl) => {\n        const progress = -slideProgress;\n        imageEl.style.transform = `translate${axis}(${progress * 100}%)`;\n      });\n    });\n  };\n\n  const setTransition = (duration) => {\n    swiper.slides.forEach((slideEl) => {\n      const images = slideEl.querySelectorAll('.swiper-slicer-image-clone');\n      const contentEl = slideEl.querySelector('.swiper-slide-content');\n      if (contentEl) {\n        contentEl.style.transitionDuration = `${duration}ms`;\n      }\n      // eslint-disable-next-line\n\n      images.forEach((imageEl, imageIndex) => {\n        if (duration === 0) {\n          imageEl.style.transitionTimingFunction = 'ease-out';\n          imageEl.style.transitionDuration = `${\n            swiper.params.speed +\n            (swiper.params.speed / (images.length - 1)) *\n              (images.length - imageIndex - 1)\n          }ms`;\n        } else {\n          imageEl.style.transitionTimingFunction = '';\n          imageEl.style.transitionDuration = `${\n            duration +\n            (duration / (images.length - 1)) * (images.length - imageIndex - 1)\n          }ms`;\n        }\n      });\n    });\n\n    effectVirtualTransitionEnd({ duration });\n  };\n\n  on('setTranslate', () => {\n    if (swiper.params.effect !== 'slicer') return;\n\n    setTranslate();\n  });\n\n  on('setTransition', (_s, duration) => {\n    if (swiper.params.effect !== 'slicer') return;\n    setTransition(duration);\n  });\n\n  on('beforeInit', () => {\n    if (swiper.params.effect !== 'slicer') return;\n\n    swiper.classNames.push('swiper-slicer');\n\n    const overwriteParams = {\n      slidesPerView: 1,\n      slidesPerGroup: 1,\n      watchSlidesProgress: true,\n      spaceBetween: 0,\n      virtualTranslate: true,\n    };\n\n    Object.assign(swiper.params, overwriteParams);\n    Object.assign(swiper.originalParams, overwriteParams);\n  });\n  on('init', () => {\n    if (swiper.params.effect !== 'slicer') return;\n    createImages();\n    emit('setTranslate', swiper, swiper.translate);\n  });\n\n  on('resize init', () => {\n    if (swiper.params.effect !== 'slicer') return;\n    setImages();\n  });\n}\n"],"names":[],"mappings":"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"}