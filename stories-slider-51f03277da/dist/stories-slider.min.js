/**
 * UI Initiative Stories Slider 1.0.0
 *
 * Instagram-like Stories Slider Made With Swiper
 *
 * https://uiinitiative.com
 *
 * Copyright 2022-2022 UI Initiative
 *
 * Released under the UI Initiative Regular License
 *
 * Released on: May 11, 2022
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).createStoriesSlider=t()}(this,(function(){"use strict";return function(e,t={}){const i=e.querySelector(".swiper"),{autoplayDuration:s=5e3,Swiper:n,EffectCube:r,onSlidesIndexesChange:l}=t;let d,{enabled:o=!0}=t,a=0;const c=[];let p,u,m,f,v,h,b,g;const E=(e,t)=>{const i=c.indexOf(e),n=void 0===t?s:t;b=n,e.storiesSliderAutoplayTimeout=setTimeout((()=>{if(e.isEnd){if(a!==i)return;d.isEnd||d.slideNext()}else e.slideNext()}),n)},w=e=>{clearTimeout(e.storiesSliderAutoplayTimeout)},y=e=>{w(e);if(b=(b||s)-((new Date).getTime()-h),e.isEnd&&b<0)return;b<0&&(b=0);const t=1-b/s,i=e.$el.find(`.stories-slider-pagination-bullet:nth-child(${e.activeIndex+1})`);i.children("span").remove(),i.append(`<span style="transform:translateX(${100*t-100}%)"></span>`)},T=e=>{w(e),E(e),h=(new Date).getTime(),e.$el.find(".stories-slider-pagination-bullet-current").removeClass("stories-slider-pagination-bullet-current");const t=e.$el.find(`.stories-slider-pagination-bullet:nth-child(${e.activeIndex+1})`);t.prevAll().addClass("stories-slider-pagination-bullet-viewed").children("span").remove(),t.prevAll().append("<span></span>"),t.nextAll().removeClass("stories-slider-pagination-bullet-viewed stories-slider-pagination-bullet-current").children("span").remove(),t.nextAll().append("<span></span>"),t.removeClass("stories-slider-pagination-bullet-viewed").addClass("stories-slider-pagination-bullet-current").children("span").remove(),t.append("<span></span>"),t[0].clientWidth,t.children("span").transition(`${s}ms`).transform("translateX(0%)"),l&&(cancelAnimationFrame(p),p=requestAnimationFrame((()=>{l(a,e.activeIndex)})))};return(()=>{const t=()=>{e.classList.add("stories-slider-perspective")},s=()=>{e.classList.remove("stories-slider-perspective")};d=new n(i,{modules:void 0!==r?[r]:[],effect:"cube",speed:500,cubeEffect:{shadow:!1},observer:!0,on:{transitionStart(){s()},sliderFirstMove(){s()},transitionEnd(){t()},init(e){e.params.resistanceRatio=.5,t()},slideChange(){const e=c[a];a=d.activeIndex;const t=c[a];w(e),E(t),T(t)}}})})(),e.querySelectorAll(".swiper .swiper").forEach(((e,t)=>{const i=new n(e,{speed:1,nested:!0,allowTouchMove:!1,observer:!0,on:{touchStart(e){u=!0,g=!1,m=(new Date).getTime(),f=setTimeout((()=>{g=!0,y(e)}),200)},touchEnd(e){clearTimeout(f),a===t&&u&&(v=(new Date).getTime()-m,g&&(e=>{e.isEnd&&b<0||(h=(new Date).getTime(),E(e,b),e.$el.find(`.stories-slider-pagination-bullet:nth-child(${e.activeIndex+1})`).children("span").transform("translateX(0%)").transition(`${b}ms`))})(e),g=!1,u=!1)},init(e){o&&(a!==t?w(e):requestAnimationFrame((()=>{T(e)})))},slideChange(e){T(e)}}});(e=>{const t=e.querySelectorAll(".swiper-slide"),i=document.createElement("div");i.classList.add("stories-slider-pagination");for(let e=0;e<t.length;e+=1){const e=document.createElement("div");e.classList.add("stories-slider-pagination-bullet"),e.appendChild(document.createElement("span")),i.appendChild(e)}e.appendChild(i)})(e),((e,t)=>{e.querySelectorAll(".swiper-slide").forEach((e=>{const i=document.createElement("div"),s=document.createElement("div");i.classList.add("stories-slider-button","stories-slider-button-prev"),s.classList.add("stories-slider-button","stories-slider-button-next"),e.appendChild(i),e.appendChild(s),i.addEventListener("click",(()=>{v>200||(t.isBeginning?d.slidePrev():t.slidePrev())})),s.addEventListener("click",(()=>{v>200||(t.isEnd?d.slideNext():t.slideNext())}))}))})(e,i),c.push(i)})),{el:e,mainSwiper:d,subSwipers:c,destroy:()=>{d&&d.destroy&&d.destroy(),c.forEach((e=>{w(e),e.$el.find(".stories-slider-pagination, .stories-slider-pagination-bullet").remove(),(e=>{e.slides.find(".stories-slider-button").remove()})(e),e.destroy&&e.destroy()}))},slideTo:(e,t)=>{if(d&&d.slideTo&&!d.destroyed&&d.slideTo(e,0),void 0!==t){const i=c[e];i.slideTo&&!i.destroyed&&(i.activeIndex===t?T(i):i.slideTo(t,0))}},enable:()=>{o||c.forEach(((e,t)=>{t===a&&T(e)}))},disable:()=>{o=!1,c.forEach(((e,t)=>{t===a?y(e):w(e)}))}}}}));
//# sourceMappingURL=stories-slider.min.js.map